rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Leaderboards per seed
    match /leaderboards/{seed}/runs/{runId} {

      // Anyone can read leaderboards
      allow read: if true;

      // Only authenticated users can write their own score
      allow create: if request.auth != null
        && request.resource.data.uid == request.auth.uid
        && request.resource.data.time is int
        && request.resource.data.time > 0;

      // Prevent edits & deletes
      allow update, delete: if false;
    }
  }
}
